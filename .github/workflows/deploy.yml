name: Deploy to Salesforce

on:
  push:
    branches:
      - main  # Change this to your desired branch

jobs:
  deploy:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout code
      uses: actions/checkout@v2

    - name: Set up Node.js
      uses: actions/setup-node@v2
      with:
        node-version: 14  # Adjust the Node.js version as needed

    - name: Install Salesforce CLI
      run: npm install -g sfdx-cli

    - name: Authenticate with Salesforce
      run: sfdx force:auth:jwt:grant --clientid ${{ secrets.SFDC_CLIENT_ID }} --jwtkeyfile ./server.key --username ${{ secrets.SFDC_USERNAME }} --setdefaultdevhubusername -a DevHub

    - name: Deploy to Salesforce
      run: |
        sfdx force:source:deploy -p force-app/main/default -u DevHub -w 10  # Adjust the source path and username as needed
